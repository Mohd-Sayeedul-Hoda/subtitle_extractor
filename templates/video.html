<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="st">

        <video controls>
        <source src={{s3_video}} type="video/mp4">
            <track
            label="English"
            kind="subtitles"
            srclang="en"
            src={{s3_subtitle}}
            default />
            Your browser does not support the video tag.
        </video> <br>
        <form onsubmit="doSomething(event); return false;">
          <input type="text" id="search" placeholder="Search something">
          <button>Search</button>
        </form>

    </div>
    </body>
 <script>
  async function doSomething(e) {
    e.preventDefault();
    try {
      subtitle = {{subtitle}}
      json = JSON.parse(subtitle)
      const input = document.getElementById("search")
      const str = input.value.toUpperCase().trim()
      var present = false
      for (let i = 0; i < json.length; i++) {
        for (let j = 0; j < json[i].lines.length; j++) {
          if (json[i].lines[j].trim().includes(str)) {
            present = true
            console.log(json[i].start)
          }
        }
      }
      if (present === false) {
        console.log("not found")
      }
    } catch (error) {
      console.log(error)
    }
  }
 </script>

</html>
